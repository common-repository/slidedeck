/*!
 * SlideDeck 3 Pro for WordPress Admin JavaScript
 *
 * More information on this project:
 * http://www.slidedeck.com/
 *
 * Full Usage Documentation: http://www.slidedeck.com/usage-documentation
 *
 * @package SlideDeck
 * @subpackage SlideDeck 3 Pro for WordPress
 *
 * @author Hummingbird Web Solutions Pvt. Ltd.
 */
/*!
Copyright 2012 HBWSL  (email : support@hbwsl.com)

This file is part of SlideDeck.

SlideDeck is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

SlideDeck is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with SlideDeck.  If not, see <http://www.gnu.org/licenses/>.
*/
var mediaUploader,SlideDeckLensAdmin={},SlideDeckPlugin={namespace:"slidedeck"},tooltipperOffset={Y:-4,X:-11};function updateSlideDeckPreview(e){var t=document.getElementById("btn_slidedeck_preview_submit"),i=t.href.split("?")[1].split("&"),s={};for(var l in i){var n=i[l].split("=");s[n[0]]=n[1]}switch(s[e.id]=e.value,e.id){case"preview_w":s.width=Math.max(630,s[e.id].match(/([0-9]+)/g)[0],10)+20;break;case"preview_h":s.height=parseInt(s[e.id].match(/([0-9]+)/g)[0],10)+200}var a=t.href.split("?")[0],o="?";for(var d in s)a+=o+d+"="+s[d],o="&";t.href=a}function closePreviewWatcher(){var e;e=setInterval((function(){document.getElementById("TB_closeWindowButton")&&(clearInterval(e),jQuery("#TB_closeWindowButton, #TB_overlay").bind("mouseup",(function(e){cleanUpSlideDecks()})))}),20)}function cleanUpSlideDecks(){jQuery("body > a").filter((function(){return-1!=this.id.indexOf("SlideDeck_Bug")})).remove()}jQuery("#options-cta-custom-opt-cbutton").click((function(){jQuery(".cbutton-parent").show(),jQuery(".cimage-parent").hide()})),jQuery("#options-cta-custom-opt-cimage").click((function(){jQuery(".cbutton-parent").hide(),jQuery(".cimage-parent").show()})),jQuery("#cta-upload-img-id").click((function(e){e.preventDefault(),mediaUploader||(mediaUploader=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1})).on("select",(function(){attachment=mediaUploader.state().get("selection").first().toJSON(),jQuery("#cta-preview").html('<img src="'+attachment.url+'" alt="" style ="width:200px; height:200px" / >'),jQuery("#options-cta-custom-img-url").val(attachment.url)})),mediaUploader.open()}));var updateTBSize=function(){var e=jQuery("#TB_window"),t=jQuery("#TB_title"),i=jQuery(window).width(),s=jQuery(window).height(),l=720<i?720:i,n=0,a=t.height();if(jQuery("body.admin-bar").length&&(n=jQuery("#wpadminbar").height()),e.size()){if(e.find("#slidedeck_preview_window").length){var o=jQuery("#TB_ajaxContent"),d=e.find(".slidedeck_frame"),c=d.closest("div:not(.slidedeck_frame)"),r={borderLeft:parseInt(d.css("border-left-width"),10),borderRight:parseInt(d.css("border-right-width"),10),paddingLeft:parseInt(d.css("padding-left"),10),paddingRight:parseInt(d.css("padding-right"),10)};for(var u in r)r[u]=isNaN(r[u])?0:r[u];var h=parseInt(jQuery("#preview_w").val(),10);l=h+r.borderLeft+r.borderRight+r.paddingLeft+r.paddingRight,s=o.outerHeight(),e.width(l+40).height(s+a),o.width(l+10),c.width(l)}else e.width(l-50).height(s-45-n);jQuery("#TB_iframeContent").width(l-50).height(s-75-n),e.css({"margin-left":"-"+parseInt(e.width()/2,10)+"px"}),void 0!==document.body.style.maxWidth&&e.css({top:20+n+"px","margin-top":"0"})}return jQuery("a.slide-background-upload").each((function(){var e=this.href;e&&(e=(e=e.replace(/&width=[0-9]+/g,"")).replace(/&height=[0-9]+/g,""),this.href=e+"&width="+(l-80)+"&height="+(s-85-n))}))},tb_position=updateTBSize;function sdhtmlvideo(e){"sdhtml5"==e?(jQuery(".slide-content-fields").show(),jQuery(".uploadsdvideo").show(),jQuery(".change-media-src").hide(),jQuery("#youtubetext").val(""),jQuery("#video-url-input").hide()):(jQuery(".slide-content-fields").show(),jQuery(".uploadsdvideo").hide(),jQuery(".change-media-src").show(),jQuery("#video-url-input").show())}!function(e){SlideDeckPlugin.DOMUtilities={images:[],autoReplaceInputs:function(t){return this.setContext(t).context.find("input.autoReplace, textarea.autoReplace, input.auto-replace, textarea.auto-replace").addClass("empty").focus((function(t){this.value==this.defaultValue&&(this.value=""),e(this).addClass("focus").removeClass("empty")})).blur((function(t){""===e.trim(this.value)&&(this.value=this.defaultValue,e(this).addClass("empty")),e(this).removeClass("focus")})),this},setContext:function(t){return void 0!==t&&(this.context=e(t)),this},initialize:function(t){void 0===t&&(t=e(document.body)),this.setContext(t).autoReplaceInputs()}},SlideDeckPlugin.FirstSaveDialog={cookiename:"dont-show-first-save",elems:{},onComplete:function(){var t=this;e("#first-save-do-not-show-again").find("input").bind("click",(function(i){this.checked&&(e.cookie(t.cookiename,1,{expires:365}),t.modal.close())})),e("#first-save-do-not-show-again .close").bind("click",(function(e){e.preventDefault(),t.modal.close()}))},open:function(t){var i=this;if(e.cookie(this.cookiename))return!1;this.modal||(this.modal=new SimpleModal({context:"firstsave",onComplete:function(e){i.onComplete()}})),e.get(ajaxurl+"?action=slidedeck_first_save_dialog&slidedeck="+t,(function(e){i.modal.open(e)}))}},SlideDeckPlugin.GplusPostsModal={elems:{},close:function(){self.modal.close()},open:function(){var t=this;this.modal||(this.modal=new SimpleModal({context:"gplus-how-to",onComplete:function(){var i=e("#gplus-posts-how-to").slidedeck({keys:!1,scroll:!1,hideSpines:!0}),s=e("#gplus-posts-how-to-steps"),l=e("#gplus-how-to-why"),n=e("#gplus-how-to-why-link"),a=e("#gplus-how-to-next"),o=e("#gplus-how-to-step").find(".current"),d=s.find("a");s.delegate("a","click",(function(t){t.preventDefault();var s=e.data(this,"$this");s||(s=e(this),e.data(this,"$this")),d.removeClass("current"),s.addClass("current");var l=parseInt(this.href.split("#")[1],10);i.goTo(l),o.text(l),i.current==i.slides.length?a.text("Done"):a.text("Next")})),n.bind("click",(function(e){e.preventDefault(),n.hasClass("open")?(n.removeClass("open"),l.removeClass("open")):(n.addClass("open"),l.addClass("open"))})),a.bind("click",(function(e){e.preventDefault(),i.current==i.slides.length&&t.modal.close(),i.next(),o.text(i.current),d.removeClass("current"),d.eq(i.current-1).addClass("current"),i.current==i.slides.length?a.text("Finished!"):a.text("Next Step")}))}})),e.get(ajaxurl+"?action=slidedeck_gplus_posts_how_to_modal",(function(e){t.modal.open(e)}))}},SlideDeckPlugin.InsertModal={elems:{},insertSlideDecks:function(){var e=this.elems.form.serializeArray(),t=[],i="";for(var s in e){var l=e[s];"slidedecks[]"==l.name&&t.push("[SlideDeck id="+l.value+(1==parent.slideDeck2iframeByDefault?" iframe=1":"")+"]")}var n,a=void 0!==parent.tinymce,o=void 0!==parent.QTags;if(parent.wpActiveEditor)a&&(n=!parent.tinymce.activeEditor||"mce_fullscreen"!=parent.tinymce.activeEditor.id&&"wp_mce_fullscreen"!=parent.tinymce.activeEditor.id?parent.tinymce.get(parent.wpActiveEditor):parent.tinymce.activeEditor);else if(a&&parent.tinymce.activeEditor)n=parent.tinymce.activeEditor,parent.wpActiveEditor=n.id;else if(!o)return!1;if(n&&!n.isHidden()){for(var d in parent.tinymce.isIE&&n.windowManager.insertimagebookmark&&n.selection.moveToBookmark(n.windowManager.insertimagebookmark),t)i+="<p>"+t[d]+"</p>";n.execCommand("mceInsertContent",!1,i)}else if(o){var c="";for(var d in t)i+=c+t[d],c="\n\n";parent.QTags.insertContent(i)}else parent.getElementById(parent.wpActiveEditor).value+=i;try{parent.tb_remove()}catch(e){}},updateOrderby:function(){var t=this;e.ajax({url:this.elems.form.attr("action"),data:this.elems.form.serialize(),success:function(e){t.elems.tableContainer.html(e)}})},initialize:function(){var t=this;if(this.elems.form=e("#slidedeck-insert-iframe-form"),this.elems.form.length<1)return!1;this.elems.tableContainer=e("#slidedeck-insert-iframe-section-table .inner"),this.elems.cancelLink=e("#slidedeck-insert-iframe-cancel-link"),this.elems.cancelLink.bind("click",(function(e){e.preventDefault(),parent.tb_remove()})),this.elems.form.delegate('select[name="orderby"]',"change",(function(e){t.updateOrderby()})),this.elems.form.delegate("td","mouseenter mouseleave click",(function(t){var i=e.data(this,"$this"),s=e.data(this,"$row"),l=e.data(this,"$input"),n=e.data(this,"$siblings");switch(i||(i=e(this),e.data(this,"$this",i)),s||(s=i.closest("tr"),(n=s.children("td")).each((function(){e.data(this,"$row",s),e.data(this,"$siblings",n)}))),l||(l=s.find("input.slidedecks-insert"),n.each((function(){e.data(this,"$input",l)}))),t.type){case"mouseenter":s.addClass("hover");break;case"mouseleave":s.removeClass("hover");break;case"click":s.hasClass("selected")?(l[0].checked=!1,s.removeClass("selected")):(s.addClass("selected"),l[0].checked=!0)}})),this.elems.form.bind("submit",(function(e){e.preventDefault(),t.insertSlideDecks()}))}},SlideDeckPlugin.AddonsManagement={elems:{},deleteLens:function(t){var i=this,s=e(t);e.ajax({url:document.location.href,data:s.serialize(),type:"post",dataType:"json",success:function(e){if(!0===e.error)return void 0!==e.redirect?(document.location.href=e.redirect,!1):(alert(e.message),!1);s.closest(".lens").fadeOut(500,(function(){s.closest(".lens").remove(),i.elems.lensList.masonry("reload")}))}})},initialize:function(){var t=this;if(this.elems.lensList=e("#slidedeck-addons"),this.elems.lensList.length<1)return!1;this.elems.lenses=this.elems.lensList.find(".lens"),this.elems.lensList.delegate(".actions form","submit",(function(e){e.preventDefault(),confirm("Are you sure you want to delete this Addon? THIS CANNOT BE UNDONE.")&&t.deleteLens(this)})),e("#slidedeck_lens_management").delegate("a.disabled, .disabled a","click",(function(e){return e.preventDefault(),!1})),this.elems.lensList.masonry({itemSelector:".lens",columnWidth:278,gutterWidth:45,animationOptions:{duration:500},isAnimated:!0})}},SlideDeckPlugin.SourceManagement={elems:{},deleteLens:function(t){var i=this,s=e(t);e.ajax({url:document.location.href,data:s.serialize(),type:"post",dataType:"json",success:function(e){if(!0===e.error)return void 0!==e.redirect?(document.location.href=e.redirect,!1):(alert(e.message),!1);s.closest(".lens").fadeOut(500,(function(){s.closest(".lens").remove(),i.elems.lensList.masonry("reload")}))}})},initialize:function(){var t=this;if(this.elems.lensList=e("#slidedeck-sources"),this.elems.lensList.length<1)return!1;this.elems.lenses=this.elems.lensList.find(".lens"),this.elems.lensList.delegate(".actions form","submit",(function(e){e.preventDefault(),confirm("Are you sure you want to delete this Source? THIS CANNOT BE UNDONE.")&&t.deleteLens(this)})),e("#slidedeck_lens_management").delegate("a.disabled, .disabled a","click",(function(e){return e.preventDefault(),!1})),this.elems.lensList.masonry({itemSelector:".lens",columnWidth:278,gutterWidth:45,animationOptions:{duration:500},isAnimated:!0})}},SlideDeckPlugin.TemplateManagement={elems:{},deleteLens:function(t){var i=this,s=e(t);e.ajax({url:document.location.href,data:s.serialize(),type:"post",dataType:"json",success:function(e){if(!0===e.error)return void 0!==e.redirect?(document.location.href=e.redirect,!1):(alert(e.message),!1);s.closest(".lens").fadeOut(500,(function(){s.closest(".lens").remove(),i.elems.lensList.masonry("reload")}))}})},initialize:function(){var t=this;if(this.elems.lensList=e("#slidedeck-templates"),this.elems.lensList.length<1)return!1;this.elems.lenses=this.elems.lensList.find(".lens"),this.elems.lensList.delegate(".actions form","submit",(function(e){e.preventDefault(),confirm("Are you sure you want to delete this Template? THIS CANNOT BE UNDONE.")&&t.deleteLens(this)})),e("#slidedeck_lens_management").delegate("a.disabled, .disabled a","click",(function(e){return e.preventDefault(),!1})),this.elems.lensList.masonry({itemSelector:".lens",columnWidth:278,gutterWidth:45,animationOptions:{duration:500},isAnimated:!0})}},SlideDeckPlugin.LensManagement={elems:{},deleteLens:function(t){var i=this,s=e(t);e.ajax({url:document.location.href,data:s.serialize(),type:"post",dataType:"json",success:function(e){if(!0===e.error)return void 0!==e.redirect?(document.location.href=e.redirect,!1):(alert(e.message),!1);s.closest(".lens").fadeOut(500,(function(){s.closest(".lens").remove(),i.elems.lensList.masonry("reload")}))}})},initialize:function(){var t=this;if(this.elems.lensList=e("#slidedeck-lenses"),this.elems.lensList.length<1)return!1;this.elems.lenses=this.elems.lensList.find(".lens"),this.elems.lensList.delegate(".actions form","submit",(function(e){e.preventDefault(),confirm("Are you sure you want to delete this lens? THIS CANNOT BE UNDONE.")&&t.deleteLens(this)})),e("#slidedeck_lens_management").delegate("a.disabled, .disabled a","click",(function(e){return e.preventDefault(),!1})),this.elems.lensList.masonry({itemSelector:".lens",columnWidth:278,gutterWidth:45,animationOptions:{duration:500},isAnimated:!0})}},SlideDeckPlugin.LensManager={elems:{},loadedScripts:{},select:function(t){var i=this,s=this.elems.form.serialize();this.elems.optionsSection.find("#slidedeck-section-lenses .lens").removeClass("selected"),t.closest(".lens").addClass("selected"),e.ajax({url:ajaxurl,type:"GET",data:s+"&action=slidedeck_change_lens",dataType:"json",success:function(t){i.elems.optionsSection.find(".inner").html(t.options_html),i.elems.optionsSection.find(".fancy").fancy(),SlideDeckPlugin.OptionsNav.initialize(),i.elems.optionsSection.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.slidedeck,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X}),i.elems.optionsSection.find("input.color-picker").miniColors({change:function(e,t){this.trigger("change")}}),i.elems.optionsSection.find('input[type="text"]').each((function(){e.data(this,"previousValue",e(this).val())})),i.checkDisableCoversUI(),e("body").trigger("slidedeck:lens-change-update-choices"),SlideDeckPreview.ajaxUpdate(),i.loadedScripts[t.lens.slug]||t.lens.admin_script_url&&(e("head").append('<script type="text/javascript" src="'+t.lens.admin_script_url+'"><\/script>'),i.loadedScripts[t.lens.slug]=t.lens.admin_script_url),"function"==typeof SlideDeckLensAdmin[t.lens.slug]&&SlideDeckLensAdmin[t.lens.slug]()}})},checkDisableCoversUI:function(){var e=this;"small"==e.elems.optionsSection.find("#slidedeck-sizes :checked").val()?e.elems.optionsSection.find("#slidedeck-covers").append('<div class="disabled-mask"></div>'):e.elems.optionsSection.find("#slidedeck-covers .disabled-mask").remove()},initialize:function(){var t=this;if(this.elems.optionsSection=e("#slidedeck-section-options"),this.elems.lensesSection=this.elems.optionsSection.find("#slidedeck-section-lenses"),this.elems.lensesSection.length<1)return!1;this.elems.lenses=this.elems.lensesSection.find(".lens"),this.elems.form=e("#slidedeck-update-form"),this.elems.sizes=e("#slidedeck-sizes"),this.elems.optionsSection.delegate('#slidedeck-section-lenses input[type="radio"]',"click",(function(){var i=e.data(this,"$this");i||(i=e(this),e.data(this,"$this",i)),t.select(i)})),t.checkDisableCoversUI(),this.elems.lenses.each((function(e){var i=t.elems.lenses.eq(e).find('input[name="lens"]').val();"function"==typeof SlideDeckLensAdmin[i]&&SlideDeckLensAdmin[i]()}))},updateChoices:function(){var t=this,i=this.elems.optionsSection.find('#slidedeck-section-lenses input[name="lens"]:checked').val();e.ajax({url:ajaxurl,data:{action:"slidedeck_update_available_lenses",slidedeck_id:e("#slidedeck_id").val(),_wpnonce:e('[name="_wpnonce_update_available_lenses"]').val()},success:function(e){t.elems.lensesSection=t.elems.optionsSection.find("#slidedeck-section-lenses"),t.elems.lensesSection.html(e),t.elems.optionsSection.find('#slidedeck-section-lenses input[name="lens"]:checked').val()!=i?t.elems.lensesSection.find('input[name="lens"]:checked').click():SlideDeckPreview.ajaxUpdate()}})}},SlideDeckPlugin.OptionsNav={elems:{},height:0,deckLoaded:function(t){var i=this;i.elems.navigation=e("#slidedeck-options-groups .verticalSlideNav"),i.elems.navigation.delegate("a","click",(function(t){t.preventDefault(),i.goTo(this.href.split("#")[1]),0===i.elems.navigation.find("a").index(this)?e("#slidedeck-options-groups dl.slidedeck").addClass("top"):e("#slidedeck-options-groups dl.slidedeck").removeClass("top")})),i.goTo(1),e(i.elems.navigation.find("a")[0]).hasClass("nav_1")&&e("#slidedeck-options-groups dl.slidedeck").addClass("top")},goTo:function(e){var t=e-1,i=this.elems.optionsGroupsLists.eq(t);this.elems.optionsGroups.stop().animate({height:i.outerHeight()},this.elems.slidedeck.slidedeck().speed),this.elems.slidedeck.stop().animate({height:i.outerHeight()-1},this.elems.slidedeck.slidedeck().speed)},interfaces:function(){var t=this;for(var i in SlideDeckInterfaces){var s=SlideDeckInterfaces[i];if((a=e("#"+i)).length&&!a.is('input[type="hidden"]'))switch(s.type){case"thumbnails":(a=e("#"+i)).wrap('<div class="slidedeck2-thumbnail-picker-wrapper"></div>');var l="";for(var n in s.values)l+='<span class="thumbnail'+(n==a.val()?" selected":"")+'" data-value="'+n+'"><span style="background-image:url('+slideDeck2URLPath+s.values[n]+');"></span></span>';a.closest(".slidedeck2-thumbnail-picker-wrapper").append('<span class="slidedeck2-thumbnail-picker">'+l+"</span>"),e(".slidedeck2-thumbnail-picker").delegate(".thumbnail","click",(function(t){var i=e.data(this,"$this"),s=e.data(this,"$select"),l=e.data(this,"$thumbnail");i||(i=e(this),e.data(this,"$this",i)),s||(s=i.closest(".slidedeck2-thumbnail-picker-wrapper").find("select"),e.data(this,"$select",s)),l||(l=i.closest(".thumbnail"),e.data(this,"$thumbnail",l));var n=e.data(s[0],"$thumbnails");n||(n=i.closest(".slidedeck2-thumbnail-picker").find(".thumbnail").siblings(".thumbnail"),e.data(s[0],"$thumbnails",n));var a=i.attr("data-value");s.find("option").each((function(){this.value==a?this.selected=!0:this.selected=!1})),s.val(a).trigger("change"),n.removeClass("selected"),l.addClass("selected")}));break;case"thumbnails-flyout":var a;(a=e("#"+i)).wrap('<div id="slidedeck-2-thumbnail-picker-wrapper-'+i+'" class="slidedeck2-thumbnail-picker-wrapper"><span class="thumbnail-select"><span class="selected"></span></span></div>');var o=e(a.closest(".slidedeck2-thumbnail-picker-wrapper")[0]),d=e(o.find("span.thumbnail-select")[0]),c=e(o.find("span.selected")[0]);l="";for(var n in s.values){var r=s.values[n];r.match(/^http(s)?\:\/\//)||(r=slideDeck2URLPath+s.values[n]),l+='<span class="thumbnail'+(n==a.val()?" selected":"")+'" data-value="'+n+'"><span style="background-image:url('+r+');"></span></span>'}var u=e("#slidedeck2-thumbnail-flyout-"+i);u.length<1&&(e("body").append('<div id="slidedeck2-thumbnail-flyout-'+i+'" class="slidedeck2-thumbnail-flyout" style="display:none;"><span class="slidedeck2-thumbnail-picker clearfix"></span></div>'),u=e("#slidedeck2-thumbnail-flyout-"+i)),u.find(".slidedeck2-thumbnail-picker").html(l);var h=e("#slidedeck2-thumbnail-flyout-"+i+" .thumbnail.selected span").css("background-image").match(/url\([\'|\"]?([^\'|\"]+)[\'|\"]?\)/)[1];c.append('<img src="'+h+'" alt="" />'),e("body").bind("click",(function(t){var i=e(t.target);i.closest(".slidedeck2-thumbnail-flyout").length<1&&i.closest(".thumbnail-select").length<1&&e(".slidedeck2-thumbnail-flyout:visible").hide()})),o.delegate(".selected","click",(function(t){var i=e.data(this,"$this");i||(i=e(this),e.data(this,"$this",i));var s=i.offset(),l=i.closest(".slidedeck2-thumbnail-picker-wrapper").find("select").attr("id"),n=e("#slidedeck2-thumbnail-flyout-"+l),a=s.top,o=e(window).height(),c=e(window).scrollTop(),r=n.outerHeight();r+s.top>o+c&&o>r&&s.top-c>r?(n.addClass("invert"),a=a-r-2):(n.removeClass("invert"),a=a+d.outerHeight()+2),n.is(":visible")?n.hide():n.css({top:a,left:s.left}).show()})),e(".slidedeck2-thumbnail-flyout").delegate(".thumbnail","click",(function(t){var i=e.data(this,"$this"),s=e.data(this,"$select"),l=e.data(this,"$thumbnail");i||(i=e(this),e.data(this,"$this",i));var n=i.closest(".slidedeck2-thumbnail-flyout").attr("id").replace("slidedeck2-thumbnail-flyout-","");s||(s=e("#"+n),e.data(this,"$select",s)),l||(l=i.closest(".thumbnail"),e.data(this,"$thumbnail",l));var a=e.data(s[0],"$thumbnails");a||(a=i.closest(".slidedeck2-thumbnail-picker").find(".thumbnail").siblings(".thumbnail"),e.data(s[0],"$thumbnails",a));var o=i.attr("data-value");s.find("option").each((function(){this.value==o?this.selected=!0:this.selected=!1})),s.val(o).trigger("change"),a.removeClass("selected"),l.addClass("selected");var d=l.find("span").css("background-image").match(/url\([\'|\"]?([^\'|\"]+)[\'|\"]?\)/)[1];e("#slidedeck-2-thumbnail-picker-wrapper-"+n+" .thumbnail-select .selected img").attr("src",d),i.closest(".slidedeck2-thumbnail-flyout").hide()}));break;case"slider":var m={animate:!0,min:1,max:100,orientation:"horizontal",range:!1,step:1},p={};for(var f in m)s[f]?p[f]=s[f]:p[f]=m[f];e("#"+i).wrap('<div class="slidedeck2-slider-wrapper"></div>'),e("#"+i).before('<div id="'+i+'-slider" class="slidedeck2-slider"><span class="min">'+(s.minLabel?s.minLabel:p.min)+'</span><span class="max">'+(s.maxLabel?s.maxLabel:p.max)+"</span></div>");var k=e("#"+i+"-slider");if(a.is("select")&&k.after('<span class="selected">'+a.find("option:selected").text()+"</span>"),s.marks){var v=(p.max-p.min)/p.step,g="";for(n=0;n<v;n++)g+='<span class="mark" style="width:'+100/v+'%">'+(p.min+p.step*(n+1))+"</span>";k.append('<span class="marks">'+g+"</span>")}p.value=a.val(),p.slide=function(t,i){if(!(s=e.data(this,"$input"))){var s=e("#"+i.handle.parentNode.id.replace("-slider",""));e.data(this,s)}s.is('input[type="text"]')?s.val(i.value):s.is("select")&&(s.find("option").each((function(){this.value==i.value?this.selected=!0:this.selected=!1})),e(i.handle.parentNode).next(".selected").text(s.find("option:selected").text()))},p.change=function(i,s){if(!(l=e.data(this,"$input"))){var l=e("#"+s.handle.parentNode.id.replace("-slider",""));e.data(this,"$input",l)}SlideDeckInterfaces[l.attr("id")].update&&t.interfaceUpdate(l.val(),"slider",SlideDeckInterfaces[l.attr("id")].update),SlideDeckPreview.update(l[0],l.val())},k.slider(p),e("#"+i).bind("keyup",(function(t){var i=this;return this.sliderTimer&&clearTimeout(i.sliderTimer),this.sliderTimer=setTimeout((function(){e("#"+i.id+"-slider").slider("value",i.value)}),250),!0}))}}},interfaceUpdate:function(t,i,s){if("slider"===i){var l=e("#options-"+s.option);l.val(Math.min(parseInt(l.val(),10),parseInt(t,10)));var n=e("#options-"+s.option+"-slider");n.length&&(n.slider("option",s.value,t),"min"==s.value?n.find(".min").text(t):"max"==s.value&&n.find(".max").text(t),n.slider("value",parseInt(l.val(),10)))}},initialize:function(){var t=this;if(this.elems.optionsGroups=e("#slidedeck-options-groups"),this.elems.optionsGroups.length<1)return!1;this.elems.optionsSection=e("#slidedeck-section-options"),this.interfaces(),this.elems.optionsGroupsLists=this.elems.optionsGroups.find(".options-list"),this.elems.slidedeck=this.elems.optionsGroups.find(".slidedeck"),this.elems.optionsGroupsLists.css("min-height",84*this.elems.optionsGroupsLists.length),this.elems.optionsGroupsLists.each((function(e){t.height=Math.max(t.elems.optionsGroupsLists.eq(e).outerHeight(),t.height)})),this.elems.slidedeck.height(this.height),this.elems.slidedeck.slidedeck({scroll:!1,keys:!1}).loaded((function(e){t.deckLoaded(e)})).vertical({scroll:!1}),this.elems.optionsGroups.delegate('#slidedeck-sizes input[type="radio"]',"click",(function(){SlideDeckPlugin.LensManager.checkDisableCoversUI()})),e(window).resize((function(){t.resize()}))},resize:function(){var e=this;this.elems.slidedeck.find("dd").add(".slidesVertical").width(this.elems.slidedeck.width()),this.height=0,this.elems.optionsGroupsLists.each((function(t){this.style.height="",e.height=Math.max(e.elems.optionsGroupsLists.eq(t).outerHeight(),e.height)})),this.elems.slidedeck.height(this.height).find("dd").height(this.height),this.elems.optionsGroups.stop().animate({height:this.elems.optionsGroupsLists.eq(this.elems.slidedeck.slidedeck().vertical().current).innerHeight()+"px"},500),this.elems.slidedeck.stop().animate({height:this.elems.optionsGroupsLists.eq(this.elems.slidedeck.slidedeck().vertical().current).innerHeight()-1+"px"},500)}},SlideDeckPlugin.SourceManager={elems:{},slidedeckId:null,deleteSource:function(t){var i=this,s=e(t).closest(".slidedeck-content-source").find('input[name="source[]"]').val();e.ajax({url:t.href,data:"source="+s+"&slidedeck="+this.slidedeckId,type:"POST",success:function(e){"false"!=e&&(i.elems.contentControl.html(e),i.elems.contentControl.find(".fancy").fancy(),i.elems.contentControl.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X}),SlideDeckPlugin.LensManager.updateChoices())}})},open:function(t){var i=this;e.ajax({url:t,type:"GET",success:function(e){i.modal.open(e)}})},select:function(t){var i=this,s=e(t).closest("form"),l=s.serializeArray(),n="create";for(var a in l)"action"==l[a].name&&(n=l[a].value);"create"==n?s.submit():e.ajax({url:ajaxurl,type:"GET",data:this.elems.form.serialize()+"&"+s.serialize(),success:function(e){"false"!=e&&(i.elems.contentControl.html(e),i.elems.contentControl.find(".fancy").fancy(),i.elems.contentControl.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X}),SlideDeckPlugin.LensManager.updateChoices())}})},initialize:function(){var t=this;this.elems.head=e("head"),this.elems.body=e("body"),this.elems.form=e("#slidedeck-update-form"),this.elems.contentControl=e("#slidedeck-content-control"),this.slidedeckId=e("#slidedeck_id").val(),"undefined"!=typeof SimpleModal&&(this.modal=new SimpleModal({context:"source",onComplete:function(i){i.elems.modal.find('input[type="radio"]').bind("click",(function(){var s=e(this).closest("label");s.closest(".sources").find("label").removeClass("active"),s.addClass("active"),t.select(this),i.close()}))}})),e("body").delegate("a.slidedeck-source-modal","click",(function(e){e.preventDefault(),t.open(this.href)})),e("body").delegate("a.slidedeck-template-modal","click",(function(e){e.preventDefault(),t.open(this.href)})),e("#slidedeck-update-form").delegate(".delete.link","click",(function(e){e.preventDefault(),confirm("Are you sure you wish to delete this source?")&&t.deleteSource(this)}))}},SlideDeckPlugin.CoversEditor={elems:{},importedFonts:{},onComplete:function(t){var i=this;this.elems.modal=t.elems.modal,this.elems.form=this.elems.modal.find("form"),this.elems.frontOptions=this.elems.modal.find(".options-list.front-options"),this.elems.backOptions=this.elems.modal.find(".options-list.back-options"),this.elems.preview=this.elems.modal.find("#slidedeck-covers-preview"),this.elems.frontCover=this.elems.preview.find(".slidedeck-cover-front"),this.elems.frontBindingColor=this.elems.frontCover.find(".slidedeck-cover-binding .slidedeck-cover-color"),this.elems.frontTitle=this.elems.frontCover.find(".slidedeck-cover-title"),this.elems.frontBack=this.elems.frontCover.find(".slidedeck-cover-wrapper-back"),this.elems.frontButtonAccent=this.elems.frontCover.find(".slidedeck-cover-open .slidedeck-cover-color"),this.elems.curatedBy=this.elems.frontCover.find(".slidedeck-cover-curatedby"),this.elems.backCover=this.elems.preview.find(".slidedeck-cover-back"),this.elems.backBindingColor=this.elems.backCover.find(".slidedeck-cover-binding .slidedeck-cover-color"),this.elems.backTitle=this.elems.preview.find(".slidedeck-cover-title"),this.elems.backCopy=this.elems.preview.find(".slidedeck-cover-bodycopy"),this.elems.backButton=this.elems.preview.find(".slidedeck-cover-button"),this.elems.backCoverCTAColor=this.elems.preview.find(".slidedeck-cover-cta .slidedeck-cover-color"),this.elems.backButtonText=this.elems.backButton.find("span.text"),this.elems.backBack=this.elems.backCover.find(".slidedeck-cover-wrapper-back"),this.elems.backButtonAccent=this.elems.backCover.find(".slidedeck-cover-restart .slidedeck-cover-color"),this.elems.toggles=this.elems.modal.find("#slidedeck-covers-swap .toggle"),this.elems.modal.find(".slidedeck-cover-mask").animate({opacity:.8}),this.elems.modal.find("input, select, textarea").fancy();var s=this.elems.modal.find(".color-picker");if(s.miniColors({change:function(e,t){this.trigger("change")}}),!__hasSavedCovers){var l=e("#options-accentColor");""!==l.val()&&(s.val(l.val()),s.trigger("keyup"))}this.elems.modal.find(".cancel-modal").bind("click",(function(e){e.preventDefault(),t.close()})),this.elems.form.bind("submit",(function(s){s.preventDefault(),e.ajax({url:document.location.href.replace(document.location.search,""),data:i.elems.form.serialize(),type:"POST",success:function(e){t.close(),SlideDeckPreview.ajaxUpdate(),__hasSavedCovers=!0}})})),this.elems.modal.find("#back_title").bind("keyup",(function(){i.elems.backTitle.html(this.value.replace(/\n/,"<br/>"))})),this.elems.modal.find("#button_label").bind("keyup",(function(){i.elems.backButtonText.html(this.value)})),this.elems.modal.find("#button_url").bind("keyup",(function(){i.elems.backButton.attr("href",this.value)})),this.elems.modal.find("#front_title").bind("keyup",(function(){i.elems.frontTitle.html(this.value.replace(/\n/,"<br/>"))}));var n=this.elems.modal.find("#title_font");if(n.bind("change",(function(){var t=e(this).find("option:selected").val(),s=i.fonts[t];s.import&&(i.importedFonts[t]||(e("head").append('<link href="'+s.import+'" rel="stylesheet" type="text/css" />'),i.importedFonts[t]=!0)),"title_font"==this.id?(i.elems.frontTitle.css("font-family",s.stack),s.weight&&i.elems.frontTitle.css("font-weight",s.weight),i.elems.backTitle.css("font-family",s.stack),s.weight&&i.elems.backTitle.css("font-weight",s.weight)):"copy_font"==this.id&&i.elems.backCopy.css("font-family",s.stack)})).trigger("change"),!__hasSavedCovers){var a=e("#options-titleFont");if(""!==a.val()){var o="";n.find("option").each((function(){this.value==a.val()?(this.selected=!0,o=this.text):this.selected=!1})),n.closest(".fancy-select").find(".selected").text(o),n.trigger("change")}}this.elems.modal.find("#accent_color").bind("change",(function(){var e=Raphael.getRGB(this.value),t=Raphael.rgb2hsb(e.r,e.g,e.b);t.s=.2*t.s,t.b=1;var s=Raphael.rgb2hsb(e.r,e.g,e.b);s.s=.05*s.s,s.b=1;var l="90-hsb("+t.h+","+t.s+","+t.b+")-hsb("+s.h+","+s.s+","+s.b+")";if(i.elems.modal.find(".frosted-glass").data("slidedeck-frosted-cover-shine")&&i.elems.modal.find(".frosted-glass").data("slidedeck-frosted-cover-shine").attr("fill",l),i.elems.modal.find(".frosted-glass").data("slidedeck-frosted-cover-background")&&i.elems.modal.find(".frosted-glass").data("slidedeck-frosted-cover-background").attr("fill",l),i.elems.modal.find(".frosted-glass-back").data("slidedeck-frosted-cover-back-shine")&&i.elems.modal.find(".frosted-glass-back").data("slidedeck-frosted-cover-back-shine").attr("fill",l),i.elems.modal.find(".frosted-glass-back").data("slidedeck-frosted-cover-back-background")&&i.elems.modal.find(".frosted-glass-back").data("slidedeck-frosted-cover-back-background").attr("fill",l),i.elems.frontBindingColor.css("background-color",this.value),i.elems.backBindingColor.css("background-color",this.value),i.elems.backCoverCTAColor.css("background-color",this.value),i.elems.frontButtonAccent.data("slidedeck-cover-shape")){var n=i.elems.frontButtonAccent.data("slidedeck-cover-shape");if(jQuery.isArray(n))for(var a=0;a<n.length;a++)n[a].attr("fill",this.value);else n.attr("fill",this.value)}else i.elems.frontButtonAccent.css("background-color",this.value);if(i.elems.backButtonAccent.data("slidedeck-cover-shape")){n=i.elems.backButtonAccent.data("slidedeck-cover-shape");if(jQuery.isArray(n))for(a=0;a<n.length;a++)n[a].attr("fill",this.value);else n.attr("fill",this.value)}else i.elems.backButtonAccent.css("background-color",this.value)})).trigger("change"),this.elems.modal.find('[name="show_curator"]').bind("click",(function(){1==this.value?i.elems.curatedBy.show():i.elems.curatedBy.hide()})),this.elems.modal.find('[name="peek"]').bind("click",(function(){1==this.value?i.elems.preview.addClass("slidedeck-cover-peek"):i.elems.preview.removeClass("slidedeck-cover-peek"),i.elems.modal.find("#cover_style").trigger("change")})),this.elems.modal.find("#cover_style").bind("change",(function(){var t=e(this).find("option:selected").val();e(this).find("option").each((function(){this.selected||i.elems.preview.removeClass("slidedeck-cover-style-"+this.value)})),i.elems.preview.addClass("slidedeck-cover-style-"+t),i.elems.preview.find(".slidedeck-cover-color").data("slidedeck-cover-shape",!1).find("svg").remove(),SlideDeckCoverPostProcessFront[t]&&SlideDeckCoverPostProcessFront[t](i.elems.preview.find(".slidedeck-cover-nav-button"),i.elems.preview.hasClass("slidedeck-cover-peek")),SlideDeckCoverPostProcessBack[t]&&SlideDeckCoverPostProcessBack[t](i.elems.preview.find(".slidedeck-cover-nav-button.slidedeck-cover-restart"),i.elems.preview.hasClass("slidedeck-cover-peek")),0===i.elems.modal.find(".toggle-back.selected").length&&i.elems.preview.find(".slidedeck-cover-back").css({visibility:"hidden"}),i.elems.modal.find("#accent_color").trigger("change");var s=i.elems.modal.find("#variation").find("option").filter(":selected").val(),l="";for(var n in i.variations[t])l+=s==n?'<option selected="selected" value="'+n+'">'+i.variations[t][n]+"</option>":'<option value="'+n+'">'+i.variations[t][n]+"</option>";if(e.isEmptyObject(i.variations[t]))i.elems.modal.find("#variation").closest("li").slideUp(500);else{var a=i.elems.modal.find("#variation").closest("li");a.slideDown(500),a.find(".fancy-select, select.fancy").remove(),a.find(".inner").append('<select class="fancy" id="variation" name="variation" style="">'+l+"</select>"),a.find(".fancy").fancy(),a.find(".fancy").trigger("change")}})).trigger("change"),this.elems.modal.find(".options-list.global-options").delegate("#variation","change",(function(){e(this).find("option").each((function(){this.selected||i.elems.preview.removeClass("slidedeck-cover-"+this.value)})),i.elems.preview.addClass("slidedeck-cover-"+e(this).find("option:selected").val())})).trigger("change"),this.elems.modal.delegate(".toggle","click",(function(t){t.preventDefault();var s=e.data(this,"$this");s||(s=e(this),e.data(this,"$this",s)),i.elems.toggles.removeClass("selected"),s.addClass("selected"),i.toggle(this.href.split("#")[1])}))},open:function(){var t=this,i=this.elems.slidedeckPreview.attr("src").match(/slidedeck\=([\d]+)/)[1];this.elems.link.attr("href",this.elems.link.attr("href").replace(/slidedeck\=([\d]+)/,"slidedeck="+i)),this.modal||(this.modal=new SimpleModal({context:"covers",onComplete:function(e){t.onComplete(e)}})),e.get(this.elems.link.attr("href"),(function(e){t.modal.open(e)}))},toggle:function(e){switch(e){case"front":this.elems.frontCover.css({visibility:"visible"}),this.elems.backCover.css({visibility:"hidden"}),this.elems.frontOptions.css("height","auto"),this.elems.backOptions.css("height",0);break;case"back":this.elems.frontCover.css({visibility:"hidden"}),this.elems.backCover.css({visibility:"visible"}),this.elems.frontOptions.css("height",0),this.elems.backOptions.css("height","auto")}},initialize:function(){var t=this;if(this.elems.link=e("#slidedeck-covers-modal-link"),this.elems.link.length<1)return!1;this.elems.slidedeckPreview=e("#slidedeck-preview"),this.elems.slidedeckOptions=e("#slidedeck-section-options"),this.elems.showFrontCoverField=e('input[name="options[show-front-cover]"]'),this.elems.showBackCoverField=e('input[name="options[show-back-cover]"]'),this.elems.slidedeckOptions.delegate("#slidedeck-covers-modal-link","click",(function(e){e.preventDefault(),t.open()}))}},SlideDeckPlugin.beforeUnload={initialize:function(){var t=this;if(this.form=e("#slidedeck-update-form"),this.form.length<1)return!1;this.originalSerialize=this.form.serialize(),window.onbeforeunload=function(){if(t.originalSerialize!=t.form.serialize())return"You have unsaved changes to this SlideDeck. Are you sure you want to leave without saving?"},this.form.bind("submit",(function(){window.onbeforeunload=null}))}},e(document).ready((function(){if(e("#slidedeck-insert-iframe-section-header").find(".fancy").fancy(),e("#slidedeck-update-form, #slidedeck-option-wrapper").find(".fancy").fancy(),SlideDeckPlugin.DOMUtilities.initialize(),SlideDeckPlugin.OptionsNav.initialize(),SlideDeckPlugin.SourceManager.initialize(),SlideDeckPlugin.LensManagement.initialize(),SlideDeckPlugin.LensManager.initialize(),SlideDeckPlugin.InsertModal.initialize(),SlideDeckPlugin.CoversEditor.initialize(),SlideDeckPlugin.beforeUnload.initialize(),SlideDeckPlugin.AddonsManagement.initialize(),SlideDeckPlugin.SourceManagement.initialize(),SlideDeckPlugin.TemplateManagement.initialize(),0===e("#slidedeck-table").length?"function"==typeof e.fn.tooltipper&&e(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X}):"function"==typeof e.fn.tooltipper&&e("#slidedeck-table .tooltip").tooltipper({speed:0,delay:0,namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y-10,offsetX:tooltipperOffset.X}),"function"==typeof e.fn.miniColors&&e("input.color-picker").miniColors({change:function(e,t){this.trigger("change")}}),e("#slidedeck-table").delegate(".slidedeck-preview-link","click",(function(t){t.preventDefault();var i=e.data(this,"$this"),s=e.data(this,"$iframe"),l=(e.data(this,"$td"),this.href),n=parseInt(this.href.match(/\&width=(\d+)/)[1],10);if(height=parseInt(this.href.match(/\&height=(\d+)/)[1],10),i||(i=e(this),e.data(this,"$this",i)),i.hasClass("animating"))return!1;if(i.addClass("animating"),!s){var a=i.attr("data-for");s=e("#"+a),e.data(this,"$iframe",s)}if(s.hasClass("open"))s.removeClass("open").animate({height:0,marginTop:0,marginBottom:0},500,(function(){s[0].src="about:blank",i.removeClass("animating")}));else if(s.css("width",n).animate({height:height,marginTop:20,marginBottom:20},500,(function(){s[0].src=l,i.removeClass("animating")})).addClass("open"),1==SlideDeckAnonymousStats.optin){var o=-1!=i.closest(".slidedeck-row").find(">img.icon").attr("src").indexOf("/custom/images/icon.png");(new Image).src="http://trk.kissmetrics.com/e?_k="+SlideDeckAnonymousStats.apikey+"&_p="+SlideDeckAnonymousStats.hash+"&_n="+escape("Preview SlideDeck")+"&"+escape("SlideDeck Type")+"="+(o?"custom":"dynamic")}})).delegate(".slidedeck-getcode-link","click",(function(t){t.preventDefault();var i=e.data(this,"$this"),s=e.data(this,"modal");i||(i=e(this),e.data(this,"$this",i)),s||(s=new SimpleModal({context:"firstsave",onComplete:function(t){SlideDeckPlugin.FirstSaveDialog.onComplete(t),e("#get-code-close").delegate("a.close","click",(function(e){e.preventDefault(),t.close()}))}})),e.get(i.attr("href"),(function(e){s.open(e)}))})),e("#slidedeck-update-form").delegate("#gplus-how-to","click",(function(e){e.preventDefault(),SlideDeckPlugin.GplusPostsModal.open()})),e("#slidedeck-update-form").delegate(".configure-source","click",(function(t){t.preventDefault();var i=e(this).siblings(".slidedeck-content-source");e(".slidedeck-content-source").not(i).addClass("hidden"),i.toggleClass("hidden"),i.hasClass("hidden")?e("body").unbind("click.hideFlyout"):e("body").bind("click.hideFlyout",(function(t){0==e(t.target).parents("div.slidedeck-content-source").length&&e(t.target).parent().hasClass("configure-source")}))})),e("#slidedeck-update-form").delegate(".cancel.link","click",(function(t){t.preventDefault(),e(this).closest(".slidedeck-content-source").addClass("hidden"),e("body").unbind("click.hideFlyout")})),e(".slidedeck-content-source .cache-slider").length){var t=e(this).closest(".slidedeck-content-slider"),i=t.find('[name="options[feedCacheDuration]"]'),s=[60,300,600,900,1800,2700,3600,7200,10800,21600,43200,86400],l=["1 minute","5 minutes","10 minutes","15 minutes","30 minutes","45 minutes","1 hour","2 hours","3 hours","6 hours","12 hours","1 day"],n=e.inArray(parseInt(i.val(),10),s);-1==n&&(n=3),e(".slidedeck-content-source .cache-slider").slider({value:n,animate:!0,min:0,max:11,step:1,slide:function(e,n){t.find(".cache-slider-value").html(l[n.value]),i.val(s[n.value])},create:function(e,i){t.find(".cache-slider-value").html(l[n])}})}if(e("#slidedeck-update-form").delegate(".slidedeck-form-section.collapsible .hndl","click",(function(t){var i=e.data(this,"$this"),s=e.data(this,"$inner"),l=e.data(this,"$section"),n=e.data(document.body,"slidedeck_id");if(i||(i=e(this),e.data(this,"$this",i)),i.hasClass("animating"))return!1;i.addClass("animating"),n||(n=e("#slidedeck_id").val(),e.data(document.body,"slidedeck_id",n)),s||(s=i.closest(".hndl-container").next(".inner"),e.data(this,"$inner",s)),l||(l=i.closest(".slidedeck-form-section.collapsible"),e.data(this,"$section",l));var a="hide--"+n+"--"+l.prop("id"),o=null,d=e.data(s[0],"inner_height"),c=0;l.hasClass("closed")?(l.removeClass("closed"),l.find(".inner").height("auto"),d=l.find(".inner").height(),c="auto",l.find(".inner").height(0)):(e.data(s[0],"inner_height",s.height()),l.addClass("closed"),d=0,c=0,o=1),s.animate({height:d+"px"},500,(function(){i.removeClass("animating"),l.find(".inner").height(c)})),e.cookie(a,o)})).find(".slidedeck-form-section.collapsible").each((function(){var t=e(this),i=t.find(".inner"),s=i.closest(".slidedeck-form-section.collapsible"),l=e.data(document.body,"slidedeck_id");l||(l=e("#slidedeck_id").val(),e.data(document.body,"slidedeck_id",l)),e.data(this,"$inner",i),e.data(this,"$section",s),e.data(i[0],"inner_height",i.height()),e.cookie("hide--"+l+"--"+this.id)&&(t.addClass("closed"),i.css("height",0))})),e("#preview-textures a").bind("click",(function(t){t.preventDefault();var i=e.data(this,"$this"),s=e.data(this,"$chicklets"),l=e.data(this,"$stage");i||(i=e(this),e.data(this,"$this",i)),s||(s=e("#preview-textures").find("a"),e.data(this,"$chicklets",s)),l||(l=e("#slidedeck-section-preview").find(".inner"),e.data(this,"$stage",l)),s.removeClass("active"),e("#preview-textures").find("li").removeClass("active"),i.addClass("active"),i.closest("li").addClass("active");var n=new RegExp("background=([a-zA-Z0-9-_]+)"),a=this.href.match(n)[1];s.each((function(){var e=this.href.match(n)[1];a==e?l.addClass("texture-"+e):l.removeClass("texture-"+e)})),e.ajax({url:ajaxurl,data:this.href.split("?")[1],type:"POST"})})),"create"==e("#form_action").val()&&e("#titlewrap #title").css({color:"#999",fontStyle:"italic"}).focus((function(e){this.style.color="",this.style.fontStyle="",this.value==this.defaultValue&&(this.value="")})),e("#title-display").bind("click",(function(t){t.preventDefault(),e("#titlewrap").addClass("editing"),e("#title").focus()})),e("#title").bind("blur",(function(t){"create"!=e("#form_action").val()&&e("#titlewrap").removeClass("editing")})).bind("keydown keyup",(function(t){if(13!=t.keyCode&&27!=t.keyCode){var i=e("#title-display").find(".title").text(this.value).width();e("#title").css("min-width",i+50)}else e(this).blur()})),e("#slidedeck-addon-key").length&&(e(".sd-free-addon-form").delegate("#slidedeck-addon-key-submit","click",(function(t){t.preventDefault(),e.ajax({url:ajaxurl+"?action=slidedeck_verify_addon_key&verify_addon_nonce="+e("#verify_addon_nonce").val()+"&key="+e("#slidedeck-addon-key").val(),success:function(t){e("#sd-addon-register-msg").html(t),e("#sd-addon-register-msg").css({display:"block"})}})})),e(".slidedeck-license-key-wrapper .verify-license-key").click()),e(".license-key-text-field").length&&(e(".slidedeck-license-key-wrapper").delegate(".verify-license-key.button","click",(function(t){t.preventDefault(),e.ajax({url:ajaxurl+"?cachebreaker="+Math.floor(1e5*Math.random())+"&"+e(this).parents("form").serialize(),success:function(t){e(".addon-verification-response").html(t).find("a").each((function(){1==SlideDeckAnonymousStats.optin&&this.href.match(/dtelepathy\.com/)&&(this.search+="&kmi="+SlideDeckAnonymousStats.hash)}))}})})),e(".slidedeck-license-key-wrapper .verify-license-key").click()),e("#slidedeck-table").delegate("form.delete-slidedeck","submit."+SlideDeckPlugin.namespace,(function(t){t.preventDefault();var i=e(this),s=i.closest("li"),l=s.parents(".inner"),n=s.next("div.slidedeck-preview-wrapper"),a=i.closest("ul");confirm("Are you sure you want to delete this SlideDeck?\nThis CANNOT be undone.")&&e.ajax({url:document.location.href,type:this.method,data:i.serialize(),success:function(){s.fadeOut(500,(function(){s.remove(),n.remove(),a.find("li").length<1&&(l.remove(),e("#no-decks-placeholder").show())}))}})})),e("#slidedeck-table").delegate("form.duplicate-slidedeck","submit."+SlideDeckPlugin.namespace,(function(t){t.preventDefault();var i=e(this),s=e("#slidedeck-table").find(".float-wrapper .left");i.closest(".slidedeck-duplicate").addClass("loading"),e.ajax({url:document.location.href,type:this.method,data:i.serialize(),success:function(t){"false"!=t&&(s.html(t),e(".tooltipper.slidedeck").remove(),s.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X}))}})})),e("#delete-slidedeck").bind("click",(function(t){t.preventDefault();var i=this.href.match(/slidedeck(\=|\%3D)([\d]+)/)[2],s=this.href.match(/_wpnonce(\=|\%3D)([a-zA-Z0-9]+)/)[2];confirm("Are you sure you want to delete this SlideDeck?\nThis CANNOT be undone.")&&e.ajax({url:document.location.href.replace(document.location.search,""),type:"POST",data:"slidedeck="+i+"&_wpnonce="+s+"&redirect=1",success:function(e){document.location.href=e}})})),e("#template_snippet_w, #template_snippet_h").bind("keyup."+SlideDeckPlugin.namespace,(function(t){return this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t=e("#template_snippet_w").val(),i=e("#template_snippet_h").val(),s="<?php slidedeck( "+e("#slidedeck_id").val()+", array( 'width' => '"+t+"', 'height' => '"+i+"' ) ); ?>";e("#slidedeck-template-snippet").val(s)}),100),!0})),e("#slidedeck-template-snippet").focus((function(){this.select()})),updateTBSize(),e("#slidedeck-blog-rss-feed").length&&e.ajax({url:ajaxurl,data:"action=slidedeck2_blog_feed",type:"GET",complete:function(t){var i=t.responseText,s=e("#slidedeck-blog-rss-feed");"false"!=i?s.html(t.responseText):s.text("Unable to connect to feed!")}}),e("#slidedeck-sizes").length&&e("#slidedeck-section-options").delegate('#slidedeck-sizes input[type="radio"]',"click",(function(t){"custom"==this.value?e("#slidedeck-custom-dimensions").addClass("selected").animate({height:32,opacity:1},500,(function(){SlideDeckPlugin.OptionsNav.resize()})).find("input").each((function(){this.disabled=!1})):e("#slidedeck-custom-dimensions").removeClass("selected").animate({height:0,opacity:0},500,(function(){SlideDeckPlugin.OptionsNav.resize()})).find("input").each((function(){this.disabled=!0})),"fullwidth"==this.value?e("#slidedeck-fullwidth-dimensions").addClass("selected").animate({height:32,opacity:1},500,(function(){SlideDeckPlugin.OptionsNav.resize()})).find("input").each((function(){this.disabled=!1})):e("#slidedeck-fullwidth-dimensions").removeClass("selected").animate({height:0,opacity:0},500,(function(){SlideDeckPlugin.OptionsNav.resize()})).find("input").each((function(){this.disabled=!0}))})),e("#slidedeck-search-submit").bind("click",(function(t){t.preventDefault(),e("#slidedeck-table-sort-select").trigger("change")})),e("#slidedeck-table-sort-select").bind("change",(function(t){var i=e.data(this,"$this"),s=e.data(this,"$form"),l=e.data(this,"$table");i||(i=e(this),e.data(this,"$this",i)),s||(s=e("#slidedeck-table-sort"),e.data(this,"$form",s)),l||(l=e("#slidedeck-table").find(".float-wrapper .left"),e.data(this,"$table",l)),e.ajax({url:ajaxurl,type:"get",data:s.serialize(),success:function(e){"false"!=e&&(l.html(e),l.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X}))}})})),e('.wp-submenu a[href$="slidedeck2-lite.php/need-support"]').addClass("upgrade-modal").attr("rel","need-support"),e(".upgrade-modal").length){var a="upsell";SlideDeckPlugin.UpgradeModal={addForClass:function(t){e("#slidedeck-upsell-simplemodal")[0].className=e("#slidedeck-upsell-simplemodal")[0].className.replace(/for(\-[a-z]+)+\s?/,""),e("#slidedeck-upsell-simplemodal").addClass("for-"+t)},open:function(e){this.modal||(this.modal=new SimpleModal({context:a})),this.modal.open(e)}},e("#wpwrap").delegate(".upgrade-modal","click",(function(t){t.preventDefault();var i=e(this).attr("rel");e.get(ajaxurl+"?action=slidedeck_upsell_modal_content&feature="+i,(function(t){SlideDeckPlugin.UpgradeModal.open(t),SlideDeckPlugin.UpgradeModal.addForClass(i),e("#slidedeck-upsell-simplemodal a.lens.placeholder").bind("click",(function(e){e.preventDefault()}))}))}))}if(e('.wp-submenu a[href$="slidedeck.php/support"], #slidedeck-support-questions a[href$="slidedeck.php/support"]').addClass("support-modal").attr("rel","get-support"),e(".support-modal").length){var o="support";SlideDeckPlugin.SupportModal={addForClass:function(t){e("#slidedeck-support-simplemodal")[0].className=e("#slidedeck-support-simplemodal")[0].className.replace(/for(\-[a-z]+)+\s?/,""),e("#slidedeck-support-simplemodal").addClass("for-"+t)},open:function(e){this.modal||(this.modal=new SimpleModal({context:o})),this.modal.open(e)}},e("#wpwrap").delegate(".support-modal","click",(function(t){t.preventDefault();var i=e(this).attr("rel");e.get(ajaxurl+"?action=slidedeck_support_modal_content",(function(e){SlideDeckPlugin.SupportModal.open(e),SlideDeckPlugin.SupportModal.addForClass(i)}))}))}SlideDeckAnonymousStats.opted||(SlideDeckPlugin.anonymousStatsOptinModal=new SimpleModal({context:"anonymous-stats",onComplete:function(t){t.elems.modal.on("submit","form",(function(t){t.preventDefault(),e.ajax({type:this.getAttribute("method"),url:this.getAttribute("action"),data:e(this).serialize()}),SlideDeckPlugin.anonymousStatsOptinModal.close()})).on("click",'input[type="radio"]',(function(t){e(this).closest("form").submit()}))}}),e.get(ajaxurl+"?action=slidedeck_anonymous_stats_optin",(function(e){SlideDeckPlugin.anonymousStatsOptinModal.open(e)})))})),e(window).resize((function(){updateTBSize()}))}(jQuery),jQuery.cookie=function(e,t,i){if(void 0===t){var s=null;if(document.cookie&&""!==document.cookie)for(var l=document.cookie.split(";"),n=0;n<l.length;n++){var a=jQuery.trim(l[n]);if(a.substring(0,e.length+1)==e+"="){s=decodeURIComponent(a.substring(e.length+1));break}}return s}i=i||{},null===t&&(t="",i.expires=-1);var o,d="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(o=new Date).setTime(o.getTime()+24*i.expires*60*60*1e3):o=i.expires,d="; expires="+o.toUTCString());var c=i.path?"; path="+i.path:"",r=i.domain?"; domain="+i.domain:"",u=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),d,c,r,u].join("")},jQuery(document).ready((function(){jQuery("#instagram_client_id").val()||jQuery(".instabutton").hide();var e=window.location.hash,t=e.substring(14);t.split(".")[0];e&&jQuery.ajax({url:ajaxurl,data:"action=slidedeck_save_instagram_code&access_token="+t,dataType:"JSON",type:"POST",success:function(e){location.href=e.redirect_uri}})})),jQuery(document).ready((function(){jQuery("#create_new_slider").click((function(){str="action=create_new_slider_temp",jQuery.ajax({url:ajaxurl,data:str,type:"POST",success:function(e){jQuery("#create-new-slider-dynamic-slidedeck").remove(),jQuery("#create-new-slider-template-slidedeck").remove(),jQuery("#extra-new-slide-div").html(e)},error:function(e){alert(e.error)}})}))})),function(e,t,i){SlideDeckPlugin.CustomCSSEditor={textarea:null,initialize:function(){var t=this;t.textarea=e("#custom-slidedeck-css").find("textarea"),t.textarea.length&&(this.editor=CodeMirror.fromTextArea(t.textarea[0],{lineNumbers:!0,mode:"css",theme:"slidedeck",readOnly:!1,indentUnit:4,tabSize:4,lineWrapping:!0,onCursorActivity:function(e){e.save(),SlideDeckPlugin.CustomCSSEditor.editor.setLineClass(SlideDeckPlugin.CustomCSSEditor.line,null),SlideDeckPlugin.CustomCSSEditor.line=SlideDeckPlugin.CustomCSSEditor.editor.setLineClass(SlideDeckPlugin.CustomCSSEditor.editor.getCursor().line,"activeline")},onChange:function(e){t.textarea.sliderTimer&&clearTimeout(t.textarea.sliderTimer),t.textarea.sliderTimer=setTimeout((function(){SlideDeckPreview.ajaxUpdate()}),990)}}),this.line=this.editor.setLineClass(0,"activeline"))}},e(document).ready((function(){wp.codeEditor.initialize(e("#custom-slidedeck-css > textarea"),my_var.cm_settings)}))}(jQuery,window);